<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tao Te Ching Wisdom Pool</title>
    <link rel="icon" type="image/png" href="QDShell.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/base.css">
    <link rel="stylesheet" href="assets/css/index.css">
    <script src="assets/js/nav.js" defer></script>
</head>
<body class="index-page min-h-screen flex flex-col items-center justify-center p-4">
    <header class="text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-cyan-200 mb-2 header-title">
            <span class="chinese-character">道</span> Wisdom Pool
        </h1>
        <p class="text-blue-200 italic">Wayne Dyer's translation of Lao-Tzu's Tao Te Ching</p>
    </header>

    <main class="w-full max-w-4xl flex flex-col md:flex-row items-center justify-center gap-8 mb-8">
        <div class="relative w-full md:w-1/2 aspect-square max-w-md">
            <div id="pool" class="pool w-full h-full rounded-full flex items-center justify-center relative overflow-hidden">
                <div class="absolute inset-0 flex items-center justify-center">
                    <div class="text-center p-4">
                        <i class="fas fa-water text-4xl text-blue-200 opacity-50"></i>
                        <p class="mt-2 text-blue-100">Drop a stone to receive wisdom</p>
                    </div>
                </div>
            </div>

            <div id="rock-pile" class="absolute -bottom-4 -left-4 w-32 h-32 flex flex-wrap gap-2 p-2">
                <div class="rock w-8 h-8 bg-gray-400 rounded-full shadow-lg" draggable="true"></div>
                <div class="rock w-10 h-10 bg-gray-500 rounded-full shadow-lg" draggable="true"></div>
                <div class="rock w-6 h-6 bg-gray-600 rounded-full shadow-lg" draggable="true"></div>
                <div class="rock w-12 h-12 bg-gray-300 rounded-full shadow-lg" draggable="true"></div>
                <div class="rock w-7 h-7 bg-gray-400 rounded-full shadow-lg" draggable="true"></div>
                <div class="rock w-9 h-9 bg-gray-500 rounded-full shadow-lg" draggable="true"></div>
            </div>
        </div>

        <div class="w-full md:w-1/2">
            <div id="quote-container" class="quote-container rounded-lg p-6 min-h-64 hidden">
                <div class="flex justify-between items-start mb-4">
                    <span class="chinese-character text-2xl">道</span>
                    <span class="text-sm text-blue-300">Chapter <span id="chapter-number">1</span></span>
                </div>
                <p id="quote-text" class="verse-text mb-4"></p>
                <div class="mt-6 flex justify-end">
                    <button id="new-quote-btn" class="px-4 py-2 bg-blue-800 hover:bg-blue-700 rounded-full text-sm flex items-center gap-2">
                        <i class="fas fa-sync-alt"></i> New Wisdom
                    </button>
                </div>
            </div>

            <div id="instructions" class="text-center p-6 bg-gray-900 bg-opacity-50 rounded-lg">
                <i class="fas fa-hand-pointer text-3xl text-blue-300 mb-4"></i>
                <h3 class="text-xl font-semibold mb-2">Seek the Tao's Wisdom</h3>
                <p class="text-blue-100 mb-4">Drag a stone from the pile and drop it into the cosmic pool to receive a verse from the Tao Te Ching.</p>
                <p class="text-sm text-blue-300 italic">"The Tao that can be told is not the eternal Tao."</p>
            </div>
        </div>
    </main>

    <footer class="text-center text-blue-300 text-sm mt-auto py-4">
        <p>Wisdom from "Change Your Thoughts, Change Your Life" by Dr. Wayne W. Dyer</p>
        <p class="mt-1">Based on Lao-Tzu's Tao Te Ching</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navToggle = document.getElementById('navToggle');
            const navMenu = document.getElementById('navMenu');
            const navIcon = document.getElementById('navIcon');

            if(navToggle){
              navToggle.addEventListener('click', function() {
                navMenu.classList.toggle('active');
                navIcon.classList.toggle('active');
              });
            }

            document.addEventListener('click', function(event) {
                if(navToggle && !navToggle.contains(event.target) && navMenu && !navMenu.contains(event.target)) {
                    navMenu.classList.remove('active');
                    navIcon.classList.remove('active');
                }
            });

            const pool = document.getElementById('pool');
            const rockPile = document.getElementById('rock-pile');
            const rocks = document.querySelectorAll('.rock');
            const quoteContainer = document.getElementById('quote-container');
            const instructions = document.getElementById('instructions');
            const quoteText = document.getElementById('quote-text');
            const chapterNumber = document.getElementById('chapter-number');
            const newQuoteBtn = document.getElementById('new-quote-btn');

            let draggedRock = null;
            let quotes = [];
            let currentQuoteIndex = -1;

            quotes = [
                { chapter: 1, text: "The Tao that can be told is not the eternal Tao. The name that can be named is not the eternal name. The unnamable is the eternally real. Naming is the origin of all ..." },
                { chapter: 2, text: "When people see some things as beautiful, other things become ugly. When people see some things as good, other things become bad. Being and non-being create each other..." }
            ];

            rocks.forEach(rock => {
                rock.addEventListener('dragstart', function(e) {
                    draggedRock = e.target;
                    e.target.style.opacity = '0.5';
                });

                rock.addEventListener('dragend', function(e) {
                    e.target.style.opacity = '1';
                });
            });

            pool.addEventListener('dragover', function(e) {
                e.preventDefault();
                if (!pool.classList.contains('active')) {
                    pool.classList.add('active');
                }
            });

            pool.addEventListener('dragleave', function() {
                pool.classList.remove('active');
            });

            pool.addEventListener('drop', function(e) {
                e.preventDefault();
                pool.classList.remove('active');

                if (draggedRock) {
                    createRipple(e);
                    draggedRock.remove();
                    showRandomQuote();
                    setTimeout(() => { addNewRock(); }, 2000);
                }
            });

            newQuoteBtn.addEventListener('click', function() {
                createRipple({ clientX: pool.offsetLeft + pool.offsetWidth/2, clientY: pool.offsetTop + pool.offsetHeight/2 });
                showRandomQuote();
            });

            function createRipple(e) {
                const ripple = document.createElement('div');
                ripple.className = 'ripple';
                ripple.style.left = (e.clientX - pool.getBoundingClientRect().left) + 'px';
                ripple.style.top = (e.clientY - pool.getBoundingClientRect().top) + 'px';
                pool.appendChild(ripple);
                ripple.addEventListener('animationend', () => { ripple.remove(); });
            }

            function showRandomQuote() {
                instructions.classList.add('hidden');
                quoteContainer.classList.remove('hidden');
                quoteContainer.classList.add('fade-in');

                let newIndex;
                do { newIndex = Math.floor(Math.random() * quotes.length); } while (newIndex === currentQuoteIndex && quotes.length > 1);

                currentQuoteIndex = newIndex;
                const quote = quotes[currentQuoteIndex];
                quoteText.style.opacity = '0';

                setTimeout(() => {
                    chapterNumber.textContent = quote.chapter;
                    quoteText.textContent = quote.text;
                    quoteText.style.opacity = '1';
                }, 300);
            }

            function addNewRock() {
                const sizes = [6,7,8,9,10,12];
                const shades = ['300','400','500','600'];
                const size = sizes[Math.floor(Math.random() * sizes.length)];
                const shade = shades[Math.floor(Math.random() * shades.length)];
                const rock = document.createElement('div');
                rock.className = `rock w-${size} h-${size} bg-gray-${shade} rounded-full shadow-lg`;
                rock.setAttribute('draggable','true');
                rock.addEventListener('dragstart', function(e){
                    draggedRock = e.target; e.target.style.opacity='0.5';
                });
                rock.addEventListener('dragend', function(e){ e.target.style.opacity='1'; });
                rockPile.appendChild(rock);
            }
        });
    </script>
</body>
</html>